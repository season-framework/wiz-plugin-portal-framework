<div class="side-container"><div class="side-heading area-round"><h3 class="nowrap m-0" style="max-width: 220px; overflow: hidden; text-overflow: ellipsis;"><span>Portal</span></h3><div class="ml-auto"></div><div class="btn btn-white btn-sm me-1" (click)="refresh();"><i class="fa-solid fa-refresh text-blue"></i></div><div class="btn btn-white btn-sm me-1" (click)="create(null, 'folder');"><i class="fa-solid fa-plus text-blue"></i></div><div class="btn btn-white btn-sm me-1" (click)="upload(rootNode, 'root');"><i class="fa-solid fa-upload text-blue"></i></div></div><div class="side-body area-round"><mat-tree class="file-tree" [dataSource]="dataSource" [treeControl]="treeControl"><mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding="" matTreeNodePaddingIndent="16px" (click)="open(node)" [ngClass]="active(node) ? 'active' : ''"><ng-container *ngIf="['app', 'route'].includes(node.type)"><div class="d-flex w-100" [draggable]="node.type == 'app'" (dragstart)="drag($event, node)"><i class="tree-icon fa-solid fa-cube mr-2"></i><div class="file-title" style="flex: auto; overflow: hidden;"> <span>{{node.name}}</span></div><i class="icon-action fa-solid fa-trash-can" (click)="delete(node); $event.stopPropagation();"></i></div></ng-container><ng-container *ngIf="node.type == 'file'"><i class="tree-icon fa-regular fa-file-lines mr-2" (click)="node.editable = !node.editable; $event.stopPropagation(); service.render()"></i><div class="file-title" style="flex: auto; overflow: hidden;"> <span *ngIf="!node.editable">{{node.name}}</span><input class="form-control form-control-sm" [(ngModel)]="node.rename" placeholder="{{node.type.split('.')[1]}} name" (keyup.enter)="move(node);" *ngIf="node.editable" (click)="$event.stopPropagation();"/></div><i class="icon-action fa-solid fa-download" (click)="download(node); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-trash-can" (click)="delete(node); $event.stopPropagation();"></i></ng-container></mat-tree-node><mat-tree-node *matTreeNodeDef="let node; when: isNew" matTreeNodePadding="" matTreeNodePaddingIndent="16px" (click)="open(node)"><i class="tree-icon fa-regular fa-file mr-2" *ngIf="node.type == 'new.file'"></i><i class="tree-icon fa-regular fa-folder mr-2" *ngIf="node.type == 'new.folder'"></i><div class="file-title" style="flex: auto; overflow: hidden;"> <input class="form-control form-control-sm" [(ngModel)]="node.name" placeholder="{{node.type.split('.')[1]}} name" (keyup.enter)="create(node);"/></div><i class="icon-action-always fa-solid fa-xmark" (click)="delete(node); $event.stopPropagation();"></i><i class="icon-action-always fa-solid fa-check" (click)="create(node); $event.stopPropagation();"></i></mat-tree-node><mat-tree-node *matTreeNodeDef="let node; when: isFolder" matTreeNodePadding="" matTreeNodeToggle="" matTreeNodePaddingIndent="16px" [ngClass]="active(node) ? 'active' : ''"><ng-container *ngIf="isRoot(node)"><i class="tree-icon fa-solid fa-rocket mr-2" (click)="node.editable = !node.editable; $event.stopPropagation(); service.render()"></i></ng-container><ng-container *ngIf="!isRoot(node)"><i class="tree-icon mr-2" [ngClass]="node.extended ? 'fa-regular fa-folder-open' : 'fa-solid fa-folder'" (click)="node.editable = !node.editable; $event.stopPropagation(); service.render()"></i></ng-container><div class="file-title" style="flex: auto; overflow: hidden;"><span *ngIf="!node.editable">{{node.name}}</span><input class="form-control form-control-sm" [(ngModel)]="node.rename" placeholder="{{node.type.split('.')[1]}} name" (keyup.enter)="move(node);" *ngIf="node.editable" (click)="$event.stopPropagation();"/></div><ng-container *ngIf="isRoot(node)"><i class="icon-action fa-solid fa-trash-can" (click)="delete(node); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-download" (click)="download(node); $event.stopPropagation();"></i></ng-container><ng-container *ngIf="!isRoot(node)"><i class="icon-action fa-solid fa-trash-can" (click)="delete(node); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-arrow-up-from-bracket" (click)="upload(node, 'file'); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-download" (click)="download(node); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-folder-plus" (click)="create(node, 'folder'); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-plus" (click)="create(node, 'file'); $event.stopPropagation();"></i></ng-container></mat-tree-node><mat-tree-node *matTreeNodeDef="let node; when: isMod" matTreeNodePadding="" matTreeNodeToggle="" matTreeNodePaddingIndent="16px" [ngClass]="active(node) ? 'active' : ''"><i class="tree-icon mr-2" [ngClass]="node.extended ? 'fa-regular fa-folder-open' : 'fa-solid fa-folder'"></i><div class="file-title" style="flex: auto; overflow: hidden;"><span>{{node.name}}</span></div><ng-container *ngIf="!'mod.app,mod.route'.split(',').includes(node.type)"><i class="icon-action fa-solid fa-arrow-up-from-bracket" (click)="upload(node, 'file'); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-folder-plus" (click)="create(node, 'folder'); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-plus" (click)="create(node, 'file'); $event.stopPropagation();"></i></ng-container><ng-container *ngIf="node.type == 'mod.app'"><i class="icon-action fa-solid fa-arrow-up-from-bracket" (click)="upload(node, 'app'); $event.stopPropagation();"></i><i class="icon-action fa-solid fa-plus" (click)="create(node, 'mod.app'); $event.stopPropagation();"></i></ng-container><ng-container *ngIf="node.type == 'mod.route'"><i class="icon-action fa-solid fa-plus" (click)="create(node, 'mod.route'); $event.stopPropagation();"></i></ng-container></mat-tree-node></mat-tree></div></div><ngx-loading [show]="loading"></ngx-loading>